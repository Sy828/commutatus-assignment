<div aria-hidden="true" aria-labelledby="expenseModalLabel" class="modal fade" id="expenseModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="expenseModalLabel">Add an expense</h5>
        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button">
        </button></div>
      <div class="modal-body">
        <%= form_tag(save_expenses_expenses_path, method: 'post', remote: true,:onSubmit => 'return true;',id: "save_user_expenses_form", 'data-type' => :json) do %>
       
            <div class="row">
                <div class="col-md-6 invite_drop_modal">
                    <label for="" class="form-label">Choose Expense For </label>
                    <select id="selectExpenseforid" name="" class="form-select" onchange="selectExpensefor(this);">
                        <option value="1" selected>Me</option>
                        <option value="2">Friends</option>
                    </select>
                </div>

                <div class="col-md-6 invite_drop_modal" id="friend_lst_div" style="display:none;">
                    <label for="" class="form-label">Friends</label>
                    <%= select_tag "friends_ids", options_from_collection_for_select(@friend_list, 'id', 'name'), class: 'form-select-field selectpicker', :prompt=> "Select from list",multiple: true %>
                </div>
               
        
                <div class="invite_main_box_switch">
                    <div class="invite_switch_bordertop">
                        <div class="enter_contact_info" id="con1">
                            <div class="row">
                                <div class="col-md-6 enter_contact_box">
                                    <label for="" class="form-label">Name of expense</label>
                                    <input type="text" class="form-control" name="exp_name" id="exp_name" placeholder="Description" >
                                </div>
                                <div class="col-md-6 enter_contact_box">
                                    <label for="" class="form-label">Description of expense</label>
                                    <input type="text" class="form-control" name="exp_desc" id="exp_desc" placeholder="Description" >
                                </div>
                                <div class="col-md-6 enter_contact_box">
                                    <label for="" class="form-label">Who paid for that expense</label>
                                     <%= select_tag "paid_friends_id", options_from_collection_for_select(@friend_list, 'id', 'name'), class: 'form-select', :prompt=> "You" %>
                                </div>
                                 <br><br>
                                <div class="col-md-6 enter_contact_box">
                                    <label for="" class="form-label"> Either you have borrowed or lent is shown</label>
                                    <input type="text" class="form-control" name="borroed_or_lent" id="borroed_lent_id"  >

                                </div>

                                <div class="col-md-6 enter_contact_box">
                                    <label for="" class="form-label">Amount of expense</label>
                                    <input type="Number" class="form-control" name="exp_amount" id="exp_amount" placeholder="Amount" >
                                </div>
                                <br><br>
                                 <div class="col-md-6 enter_contact_box">
                                     <label for="" class="form-label">Date</label>
                                     <%= date_field_tag(:expense_date, Date.today,:class=>"form-control")%>
                                </div>
                                
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
            </div>

            <div class="modal-footer">
            <button type="button" class="btn btn-secondary cancel_invite"  data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary confirm_invite" >Save</button>
            </div>
        <% end %>
      </div>
      
    </div>
  </div>
</div>


<script>

function selectExpensefor(elem) {
    
    var user=$(elem).val();
    if (user==2){
        $('#friend_lst_div').css('display','inline');
    }else{
        $('#friend_lst_div').css('display','none'); 
    }
    
}

$('#friends_ids').selectpicker();


$("#save_user_expenses_form").on('ajax:complete', function(event, xhr, settings) {
   
        $('#expenseModal').hide();
        window.location.reload(true); 
});

</script>
<div aria-hidden="true" aria-labelledby="settleUpModalLabel" class="modal fade" id="settleUpModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="settleUpModalLabel">Settle up</h5>
        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button">
        </button></div>
      <div class="modal-body">
        <%= form_tag(settle_up_dues_expenses_path, method: 'post', remote: true,:onSubmit => 'return true;',id: "save_settleup_form", 'data-type' => :json) do %>
       
            <div class="row">

                <div class="invite_main_box_switch">
                    <div class="invite_switch_bordertop">
                        <div class="enter_contact_info" id="con1">
                            <div class="row">

                                <div class="col-md-6 enter_contact_box">
                                    <label for="" class="form-label">Expense : </label>
                                     <%= select_tag "expense_id", options_from_collection_for_select(@expense_list, 'id', 'name'), class: 'form-select', :prompt=> "Select from list" , :onchange => "fetchAmounToPay(this);" %>
                                </div>
                                

                                <div class="col-md-6 enter_contact_box">
                                    <label for="" class="form-label"> Amount $ </label>
                                    <input type="text" class="form-control" name="amount_paid" id="amount_paid" pattern="[0-9]+" readonly> 
                                </div>
                                
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
            </div>

            <div class="modal-footer">
            <button type="button" class="btn btn-secondary cancel_invite"  data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary confirm_invite" >Save</button>
            </div>
        <% end %>
      </div>
      
    </div>
  </div>
</div>


<script>

$("#save_settleup_form").on('ajax:complete', function(event, xhr, settings) {
        $('#settleUpModal').hide();
        location.reload();  
});


function fetchAmounToPay(elem) {
   
    var exp_id = $(elem).val();	
    $.ajax({
       url: '/expenses/fetch_amoun_to_pay',
       type: "POST",
       async: false,
       data: {
          expense_id: exp_id
            },
        success: function (data) { 
              $('#amount_paid').val(data.amount);

            }
   });
 }

</script>